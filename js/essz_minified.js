var essz={INTEGER_BYTESIZE:4,SHORT_BYTESIZE:2,intArray:function(a){a=new ArrayBuffer(a*essz.INTEGER_BYTESIZE);return new Int32Array(a)},matrix2D:function(a,c){return new essz.Matrix2D(a,c)},bitMatrix2D:function(a,c){return new essz.BitMatrix2D(a,c)},shortArray:function(a){a=new ArrayBuffer(a*essz.SHORT_BYTESIZE);return new Int16Array(a)},BitMatrix2D:function(a,c){var b=Math.ceil(a/8),d=new ArrayBuffer(b*c);this._data=new Uint8Array(d);this.byteWidth=b;this.byteHeight=c}};
essz.BitMatrix2D.prototype.set=function(a,c){var b=a/8,b=(b|b)*this.byteWidth+c,d=this._data[b];this._data[b]=d|1<<a%8;return this};essz.BitMatrix2D.prototype.clear=function(a,c){var b=a/8,b=(b|b)*this.byteWidth+c,d=this._data[b];this._data[b]=d&~(1<<a%8);return this};essz.BitMatrix2D.prototype.test=function(a,c){var b=a/8;return 0!=(this._data[(b|b)*this.byteWidth+c]&1<<a%8)};
essz.BitMatrix2D.prototype.debug=function(a,c){a=a||"";c=c||"";for(var b="",d=0;d<this.byteHeight;d++){0===d%8?b+=a:0===d%4&&(b+=c);for(var e=0;e<8*this.byteWidth;e++)0===e%8?b+=a:0===e%4&&(b+=c),b+=this.test(e,d)?"1 ":"0 ";b+="\n"}return b};essz.Matrix2D=function(a,c){var b=new ArrayBuffer(a*c*essz.INTEGER_BYTESIZE);this._data=new Int32Array(b);this.width=a;this.height=c};essz.Matrix2D.prototype.get=function(a,c){return this._data[c*this.width+a]};
essz.Matrix2D.prototype.set=function(a,c,b){this._data[c*this.width+a]=b;return this};essz.Matrix2D.prototype.setField=function(a,c,b,d,e){for(var f=0;f<d;f++)for(var g=0;g<b;g++)this._data[(c+f)*this.width+(a+g)]=e};essz.Matrix2D.prototype.debug=function(){for(var a="",c=-1;c<this.height;c++){for(var b=-1;b<this.width;b++)a=-1===c&&-1===b?"\t\t":-1===c?a+("|\t<"+b+">\t"):-1===b?a+("|\t<"+c+">\t"):a+("|\t"+this._data[c*this.width+b]+"\t");a+="\n"}return a};
essz.Matrix2D.prototype.hasValue=function(a,c,b,d,e){if(void 0===d||void 0===e)return this.get(c,b)===a;for(var f=0;f<e;f++)for(var g=0;g<d;g++)if(this.get(c+g,b+f)===a)return!0;return!1};