var essz={INTEGER_BYTESIZE:4,SHORT_BYTESIZE:2,intArray:function(a){a=new ArrayBuffer(a*essz.INTEGER_BYTESIZE);return new Int32Array(a)},matrix2D:function(a,b){return new essz.Matrix2D(a,b)},bitMatrix2D:function(a,b){return new essz.BitMatrix2D(a,b)},shortArray:function(a){a=new ArrayBuffer(a*essz.SHORT_BYTESIZE);return new Int16Array(a)},BitMatrix2D:function(a,b){var c=a%8;0!==c&&(a=a+8-c);var c=a=Math.ceil(a/8),d=new ArrayBuffer(c*b);this._data=new Uint8Array(d);this.bytePerRow=c|0;this.byteWidth=
    c;this.byteHeight=b}};essz.BitMatrix2D.prototype.set=function(a,b){var c=this.bytePerRow*b,d=a/8,c=c+(d|d),d=this._data[c];this._data[c]=d|1<<a%8;return this};essz.BitMatrix2D.prototype.clear=function(a,b){var c=this.bytePerRow*b,d=a/8,c=c+(d|d),d=this._data[c];this._data[c]=d&~(1<<a%8);return this};essz.BitMatrix2D.prototype.test=function(a,b){var c=this.bytePerRow*b,d=a/8;return 0!=(this._data[c+(d|d)]&1<<a%8)};
essz.BitMatrix2D.prototype.debug=function(a,b,c){c=c||"";a=a||"\n";b="";for(var d=0;d<this.byteHeight;d++){for(var e=0;e<8*this.byteWidth;e++)0===e%8?b+=" ":0===e%4&&(b+=c),b+=this.test(e,d)?"1":"0";b+=a}return b};essz.Matrix2D=function(a,b){var c=new ArrayBuffer(a*b*essz.INTEGER_BYTESIZE);this._data=new Int32Array(c);this.width=a;this.height=b};essz.Matrix2D.prototype.get=function(a,b){return this._data[b*this.width+a]};essz.Matrix2D.prototype.set=function(a,b,c){this._data[b*this.width+a]=c;return this};
essz.Matrix2D.prototype.setField=function(a,b,c,d,e){for(var f=0;f<d;f++)for(var g=0;g<c;g++)this._data[(b+f)*this.width+(a+g)]=e};essz.Matrix2D.prototype.debug=function(){for(var a="",b=-1;b<this.height;b++){for(var c=-1;c<this.width;c++)a=-1===b&&-1===c?"\t\t":-1===b?a+("|\t<"+c+">\t"):-1===c?a+("|\t<"+b+">\t"):a+("|\t"+this._data[b*this.width+c]+"\t");a+="\n"}return a};
essz.Matrix2D.prototype.hasValue=function(a,b,c,d,e){if(void 0===d||void 0===e)return this.get(b,c)===a;for(var f=0;f<e;f++)for(var g=0;g<d;g++)if(this.get(b+g,c+f)===a)return!0;return!1};